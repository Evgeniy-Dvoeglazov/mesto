(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n}var n,r;return n=t,(r=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));n.textContent=e,t.classList.add(this._inputErrorClass),n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.textContent="",t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableSubmitButton():this.enableSubmitButton()}},{key:"enableSubmitButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"_setEventListeners",value:function(){var t=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function t(e,n,r,o,i,u,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._title=e.name,this._image=e.link,this._likes=e.likes,this._ownerId=e.owner._id,this._cardId=e._id,this._userId=i,this._altImage="фотография "+e.name,this._templateSelector=n,this._handleCardClick=r,this._handleCardDelete=o,this._addLike=u,this._removeLike=a}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_changeLikeImageStatus",value:function(){var t=this;this._likes.forEach((function(e){e._id===t._userId&&t._btnLike.classList.add("element__btn-like_active")}))}},{key:"changeLikeQuantity",value:function(t){this._elementQuantity.textContent=t.likes.length,this._btnLike.classList.toggle("element__btn-like_active")}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._elementQuantity=this._element.querySelector(".element__like-quantity"),this._btnLike=this._element.querySelector(".element__btn-like"),this._elementImage=this._element.querySelector(".element__image"),this._elementDeleteBtn=this._element.querySelector(".element__delete-btn"),this._userId===this._ownerId&&this._elementDeleteBtn.classList.add("element__delete-btn_visible"),this._changeLikeImageStatus(),this._setEventListeners(),this._element.querySelector(".element__text").textContent=this._title,this._elementQuantity.textContent=this._likes.length,this._elementImage.src=this._image,this._elementImage.alt=this._altImage,this._element}},{key:"_openPopupImage",value:function(){this._handleCardClick(this._image,this._title)}},{key:"_openPopupDelete",value:function(){this._handleCardDelete(this._cardId,this._element)}},{key:"_changeLikeCard",value:function(t){t.target.classList.contains("element__btn-like_active")?this._removeLike(this._cardId,this,this._likes.lenght):this._addLike(this._cardId,this,this._likes.lenght)}},{key:"_setEventListeners",value:function(){var t=this;this._elementImage.addEventListener("click",(function(){t._openPopupImage()})),this._elementDeleteBtn.addEventListener("click",(function(){t._openPopupDelete()})),this._btnLike.addEventListener("click",(function(e){t._changeLikeCard(e)}))}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._container=n}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.append(t)}},{key:"prependItem",value:function(t){this._container.prepend(t)}},{key:"renderItem",value:function(){this._renderer(this._items)}},{key:"renderItems",value:function(t,e){var n=this;t.forEach((function(t){n._renderer(t,e)}))}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===l(o)?o:String(o)),r)}var o}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.querySelector(".popup__close-btn").addEventListener("click",(function(){return t.close()})),this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.close()}))}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},h.apply(this,arguments)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v(r);if(o){var n=v(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._largePhoto=e._popup.querySelector(".popup__large-photo"),e._caption=e._popup.querySelector(".popup__caption"),e}return e=u,(n=[{key:"open",value:function(t,e){h(v(u.prototype),"open",this).call(this),this._largePhoto.src=t,this._largePhoto.alt="фотография "+t,this._caption.textContent=e}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(this,arguments)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=k(r);if(o){var n=k(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleSubmitForm=e,n._inputList=Array.from(n._popup.querySelectorAll(".popup__input")),n._popupForm=n._popup.querySelector(".popup__form"),n._submitButton=n._popup.querySelector(".popup__button"),n}return e=u,(n=[{key:"_getInputValue",value:function(){var t={};return this._inputList.forEach((function(e){t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var t=this;g(k(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(e){e.preventDefault();var n=t._submitButton.textContent;t._submitButton.textContent="Сохранение...",t._handleSubmitForm(t._getInputValue()).then((function(){return t.close()})).finally((function(){t._submitButton.textContent=n}))}))}},{key:"close",value:function(){g(k(u.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"setInputValues",value:function(t){this._inputList.forEach((function(e){e.value=t[e.name]}))}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},O.apply(this,arguments)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(o){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleDeleteCard=e,n}return e=u,(n=[{key:"open",value:function(t,e){O(L(u.prototype),"open",this).call(this),this._cardId=t,this._cardElement=e}},{key:"setEventListeners",value:function(){var t=this;O(L(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(e){e.preventDefault(),t._handleDeleteCard(t._cardId,t._cardElement)}))}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===I(o)?o:String(o)),r)}var o}var T=function(){function t(e){var n=e.name,r=e.info,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n,this._info=r,this._avatar=o}var e,n;return e=t,n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,info:this._info.textContent,avatar:this._avatar.src}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,r=t.avatar;this._name.textContent=e,this._info.textContent=n,this._avatar.src=r}}],n&&R(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==B(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===B(o)?o:String(o)),r)}var o}var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.baseUrl,this._headers=e.headers}var e,n;return e=t,(n=[{key:"_checkResponse",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"getInitialCards",value:function(){var t=this;return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"setUserInfo",value:function(t){var e=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.info})}).then((function(t){return e._checkResponse(t)}))}},{key:"addCard",value:function(t){var e=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._checkResponse(t)}))}},{key:"removeCard",value:function(t){var e=this;return fetch("".concat(this._url,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"addLike",value:function(t){var e=this;return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"removeLike",value:function(t){var e=this;return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"changeAvatar",value:function(t){var e=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.link})}).then((function(t){return e._checkResponse(t)}))}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),A=(document.querySelector(".popup__large-photo"),document.querySelector(".popup__caption"),document.querySelector(".profile__edit-btn")),D=document.querySelector(".profile__avatar-btn"),U=document.querySelector(".profile__add-btn"),V=document.querySelector(".profile__title-text"),F=document.querySelector(".profile__subtitle"),Q=document.querySelector(".elements__list"),N=document.querySelector(".profile__avatar-image");function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var H,M=new c((function(t,e){var n=tt(t,e);M.addItem(n)}),Q),z=new x({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"0071e523-0a93-4518-84fa-22ae645aeded","Content-Type":"application/json"}}),$={};H={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(H.formSelector)).forEach((function(t){var e=new n(H,t),r=t.getAttribute("name");$[r]=e,e.enableValidation()}));var G=new w("#popup_add",(function(t){var e={name:t.name,link:t.link};return z.addCard(e).then((function(t){var e=tt(t,X.id);M.prependItem(e)})).catch((function(t){console.log(t)}))}));G.setEventListeners();var K=new w("#popup_edit",(function(t){return z.setUserInfo(t).then((function(t){X.setUserInfo(t)})).catch((function(t){console.log(t)}))}));K.setEventListeners();var W=new w("#popup_changeAvatar",(function(t){return z.changeAvatar(t).then((function(t){X.setUserInfo(t)})).catch((function(t){console.log(t)}))}));W.setEventListeners();var X=new T({name:V,info:F,avatar:N}),Y=new d("#popup_photo");Y.setEventListeners();var Z=new C("#popup_delete",(function(t,e){z.removeCard(t).then((function(){e.remove(),Z.close()})).catch((function(t){console.log(t)}))}));function tt(t,e){return new i(t,".element-template",et,nt,e,rt,ot).generateCard()}function et(t,e){Y.open(t,e)}function nt(t,e){Z.open(t,e)}function rt(t,e){z.addLike(t).then((function(t){e.changeLikeQuantity(t)})).catch((function(t){console.log(t)}))}function ot(t,e){z.removeLike(t).then((function(t){e.changeLikeQuantity(t)})).catch((function(t){console.log(t)}))}Z.setEventListeners(),Promise.all([z.getUserInfo(),z.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];X.setUserInfo(o),X.id=o._id,M.renderItems(i,X.id)})).catch((function(t){console.log(t)})),A.addEventListener("click",(function(){K.open(),$.editForm.resetValidation();var t=X.getUserInfo(),e=t.name,n=t.info;K.setInputValues({name:e,info:n})})),U.addEventListener("click",(function(){G.open(),$.addForm.resetValidation()})),D.addEventListener("click",(function(){W.open(),$.changeAvatarForm.resetValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUVDLEVBQUssS0FDckIzQixFQUFLUSxZQUFZa0IsR0FDakIxQixFQUFLcEssR0FBSzhMLEVBQVNySixJQUVuQitHLEVBQVN3QyxZQUFZRCxFQUFPM0IsRUFBS3BLLEdBQ25DLElBQ0NzSyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2QsSUFnSUZ0QixFQUFlM0gsaUJBQWlCLFNBcEhoQyxXQUNFcUosRUFBa0JXLE9BQ2xCekIsRUFBeUIsU0FBRW9DLGtCQUUzQixNQUF1QjdCLEVBQUt3QixjQUFwQjFKLEVBQUksRUFBSkEsS0FBTXFGLEVBQUksRUFBSkEsS0FDZG9ELEVBQWtCdUIsZUFBZSxDQUFFaEssS0FBQUEsRUFBTXFGLEtBQUFBLEdBQzNDLElBK0dBNEIsRUFBWTdILGlCQUFpQixTQTNHN0IsV0FDRTRJLEVBQWlCb0IsT0FDakJ6QixFQUF3QixRQUFFb0MsaUJBQzVCLElBeUdBL0MsRUFBVTVILGlCQUFpQixTQXpGM0IsV0FDRXVKLEVBQW9CUyxPQUNwQnpCLEVBQWlDLGlCQUFFb0MsaUJBQ3JDLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMv0KFhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBDYXJkRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgLy8g0JzQtdGC0L7QtNGLINC/0L7QutCw0LfQsCDQuCDRgdC60YDRi9GC0LjRjyDRgdC+0L7QsdGJ0LXQvdC40Y8g0L7QsSDQvtGI0LjQsdC60LUg0LLQsNC70LjQtNCw0YbQuNC4XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgLy8g0JzQtdGC0L7QtCDQv9GA0L7QstC10YDQutC4INCy0LDQu9C40LTQsNGG0LjQuFxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICAvLyDQnNC10YLQvtC00Ysg0LjQt9C80LXQvdC10L3QuNGPINGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60LhcblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIGVuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyDQnNC10YLQvtC0INGD0YHRgtCw0L3QvtCy0LrQuCDRgdC70YPRiNCw0YLQtdC70Y8g0YHQvtCx0YvRgtC40Lkg0L3QsCDQv9C+0LvRjyDRhNC+0YDQvNGLXG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyDQn9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCwg0LfQsNC/0YPRgdC60LDRjtGJ0LjQuSDQstCw0LvQuNC00LDRhtC40Y5cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVDYXJkRGVsZXRlLCB1c2VySWQsIGFkZExpa2VDYXJkLCByZW1vdmVMaWtlQ2FyZCkge1xuICAgIHRoaXMuX3RpdGxlID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9pbWFnZSA9IGNhcmREYXRhLmxpbms7XG4gICAgdGhpcy5fbGlrZXMgPSBjYXJkRGF0YS5saWtlcztcbiAgICB0aGlzLl9vd25lcklkID0gY2FyZERhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmREYXRhLl9pZDtcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gICAgdGhpcy5fYWx0SW1hZ2UgPSBcItGE0L7RgtC+0LPRgNCw0YTQuNGPIFwiICsgY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7XG4gICAgdGhpcy5fYWRkTGlrZSA9IGFkZExpa2VDYXJkO1xuICAgIHRoaXMuX3JlbW92ZUxpa2UgPSByZW1vdmVMaWtlQ2FyZDtcbiAgfVxuXG4gIC8vINCf0L7Qu9GD0YfQsNC10Lwg0YDQsNC30LzQtdGC0LrRgyDQuNC3IHRlbXBsYXRlLdGN0LvQtdC80LXQvdGC0LAg0Lgg0LrQu9C+0L3QuNGD0YDQtdC8INC10LVcblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgZWxlbWVudFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JykuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBlbGVtZW50VGVtcGxhdGU7XG4gIH1cblxuICAvLyDQnNC10YLQvtC0INC/0YDQvtCy0LXRgNC60Lgg0L3QsNGI0LjRhSDQu9Cw0LnQutC+0LIg0L/RgNC4INC/0LXRgNC10LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLINC00LvRjyDRgdC+0YXRgNCw0L3QtdC90LjRjyDQsNC60YLQuNCy0L3QvtCz0L4g0YHRgtCw0YLRg9GB0LBcblxuICBfY2hhbmdlTGlrZUltYWdlU3RhdHVzKCkge1xuICAgIHRoaXMuX2xpa2VzLmZvckVhY2gobGlrZSA9PiB7XG4gICAgICBpZiAobGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgICB0aGlzLl9idG5MaWtlLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2J0bi1saWtlX2FjdGl2ZScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY2hhbmdlTGlrZVF1YW50aXR5KHF1YW50aXR5KSB7XG4gICAgdGhpcy5fZWxlbWVudFF1YW50aXR5LnRleHRDb250ZW50ID0gcXVhbnRpdHkubGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2J0bkxpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fYnRuLWxpa2VfYWN0aXZlJyk7XG4gIH1cblxuICAvLyDQn9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDQv9C+0LTQs9C+0YLQvtCy0LrQuCDQutCw0YDRgtC+0YfQutC4INC6INC/0YPQsdC70LjQutCw0YbQuNC4XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnRRdWFudGl0eSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtcXVhbnRpdHknKTtcbiAgICB0aGlzLl9idG5MaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fYnRuLWxpa2UnKTtcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgIHRoaXMuX2VsZW1lbnREZWxldGVCdG4gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxldGUtYnRuJyk7XG5cbiAgICBpZiAodGhpcy5fdXNlcklkID09PSB0aGlzLl9vd25lcklkKSB7XG4gICAgICB0aGlzLl9lbGVtZW50RGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2RlbGV0ZS1idG5fdmlzaWJsZScpO1xuICAgIH1cblxuICAgIHRoaXMuX2NoYW5nZUxpa2VJbWFnZVN0YXR1cygpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190ZXh0JykudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcbiAgICB0aGlzLl9lbGVtZW50UXVhbnRpdHkudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fZWxlbWVudEltYWdlLnNyYyA9IHRoaXMuX2ltYWdlO1xuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hbHQgPSB0aGlzLl9hbHRJbWFnZTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgLy8g0JzQtdGC0L7QtCDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDRgSDRgNCw0LfQstC10YDQvdGD0YLQvtC5INGE0L7RgtC+0LPRgNCw0YTQuNC10LlcblxuICBfb3BlblBvcHVwSW1hZ2UoKSB7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2ltYWdlLCB0aGlzLl90aXRsZSk7XG4gIH1cblxuICAvLyDQnNC10YLQvtC0INC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuXG4gIF9vcGVuUG9wdXBEZWxldGUoKSB7XG4gICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSh0aGlzLl9jYXJkSWQsIHRoaXMuX2VsZW1lbnQpO1xuICB9XG5cbiAgLy8g0JzQtdGC0L7QtCDQuNC30LzQtdC90LXQvdC40Y8g0YHRh9C10YLRh9C40LrQsCDQu9Cw0LnQutC+0LIg0Lgg0LjQt9C80LXQvdC10L3QuNGPINGG0LLQtdGC0LBcblxuICBfY2hhbmdlTGlrZUNhcmQoZXZ0KSB7XG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbGVtZW50X19idG4tbGlrZV9hY3RpdmUnKSkge1xuICAgICAgdGhpcy5fcmVtb3ZlTGlrZSh0aGlzLl9jYXJkSWQsIHRoaXMsIHRoaXMuX2xpa2VzLmxlbmdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2FkZExpa2UodGhpcy5fY2FyZElkLCB0aGlzLCB0aGlzLl9saWtlcy5sZW5naHQpO1xuICAgIH07XG4gIH1cblxuICAvLyDQnNC10YLQvtC0INGD0YHRgtCw0L3QvtCy0LrQuCDRgdC70YPRiNCw0YLQtdC70LXQuSDRgdC+0LHRi9GC0LjQuVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcblxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX29wZW5Qb3B1cEltYWdlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9lbGVtZW50RGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5fb3BlblBvcHVwRGVsZXRlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9idG5MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuXG4gICAgICB0aGlzLl9jaGFuZ2VMaWtlQ2FyZChldnQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IocmVuZGVyZXIsIGNvbnRhaW5lcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xuICB9XG5cbiAgLy8g0JTQvtCx0LDQstC70Y/QtdC8IERPTS3RjdC70LXQvNC10L3RgtGLINCyINC60L7QvdC10YLQudC90LXRgFxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH1cblxuICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICByZW5kZXJJdGVtKCkge1xuICAgIHRoaXMuX3JlbmRlcmVyKHRoaXMuX2l0ZW1zKTtcbiAgfVxuXG4gIC8vINCf0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0LCDQvtGC0LLQtdGH0LDRjtGJ0LjQuSDQt9CwINC+0YLRgNC40YHQvtCy0LrRgyDQstGB0LXRhSDQutCw0YDRgtC+0YfQtdC6XG5cbiAgcmVuZGVySXRlbXMoaXRlbXMsIHVzZXJJZCkge1xuICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtLCB1c2VySWQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy8g0J/Rg9Cx0LvQuNGH0L3Ri9C1INC80LXRgtC+0LTRiyDQvtGC0LrRgNGL0YLQuNGPINC4INC30LDQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9C+0LJcblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgLy8g0J/RgNC40LLQsNGC0L3Ri9C5INC80LXRgtC+0LTRiyDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDQvdCwIEVzY2FwZVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDRgdC70YPRiNCw0YLQtdC70Lgg0L3QsCDQt9Cw0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDQv9C+INC60L3QvtC/0LrQtSDQuCDQv9C+INC60LvQuNC60YMg0L3QsCBvdmVybGF5XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2xhcmdlUGhvdG8gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2xhcmdlLXBob3RvJyk7XG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xuICB9XG5cbiAgLy8g0J/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0YEg0YTQvtGC0L7Qs9GA0LDRhNC40LXQuVxuXG4gIG9wZW4oaW1hZ2UsIHRpdGxlKSB7XG4gICAgc3VwZXIub3BlbigpO1xuXG4gICAgdGhpcy5fbGFyZ2VQaG90by5zcmMgPSBpbWFnZTtcbiAgICB0aGlzLl9sYXJnZVBob3RvLmFsdCA9IFwi0YTQvtGC0L7Qs9GA0LDRhNC40Y8gXCIgKyBpbWFnZTtcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gdGl0bGU7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xuICB9XG5cbiAgLy8g0KHQvtCx0LjRgNCw0LXQvCDQtNCw0L3QvdGL0LUg0LLRgdC10YUg0L/QvtC70LXQuSDRhNC+0YDQvNGLXG5cbiAgX2dldElucHV0VmFsdWUoKSB7XG4gICAgY29uc3QgaW5wdXREYXRhID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXREYXRhW2lucHV0RWxlbWVudC5uYW1lXSA9IGlucHV0RWxlbWVudC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXREYXRhO1xuICB9XG5cbiAgLy8g0KPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YHQu9GD0YjQsNGC0LXQu9C4INGB0L7QsdGL0YLQuNC5XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgaW5pdGlhbFRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlKCkpXG4gICAgICAgIC50aGVuKCgpID0+IHRoaXMuY2xvc2UoKSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGluaXRpYWxUZXh0O1xuICAgICAgICB9KVxuICAgIH0pO1xuICB9XG5cbiAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INCyINC80LXRgtC+0LQgY2xvc2Ug0YHQsdGA0L7RgSDRhNC+0YDQvNGLXG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENhcmREZWxldGUgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZURlbGV0ZUNhcmQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcbiAgfVxuXG4gIG9wZW4oY2FyZElkLCBjYXJkRWxlbWVudCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWQ7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2NhcmRJZCwgdGhpcy5fY2FyZEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBpbmZvLCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2luZm8gPSBpbmZvO1xuICAgIHRoaXMuX2F2YXRhciA9IGF2YXRhcjtcbiAgfVxuXG4gIC8vINCc0LXRgtC+0LQg0L/QvtC00YHRgtCw0LLQu9GP0LXRgiDQtNCw0L3QvdGL0LUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INC/0YDQuCDQvtGC0LrRgNGL0YLQuNC4INGB0YLRgNCw0L3QuNGG0YtcblxuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCBkZWZhdWx0SW5mbyA9IHsgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCwgaW5mbzogdGhpcy5faW5mby50ZXh0Q29udGVudCwgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjIH07XG4gICAgcmV0dXJuIGRlZmF1bHRJbmZvO1xuICB9XG5cbiAgLy8g0JzQtdGC0L7QtCDQv9GA0LjQvdC40LzQsNC10YIg0L3QvtCy0YvQtSDQtNCw0L3QvdGL0LUg0YEg0YTQvtGA0LzRiyDQuCDQtNC+0LHQsNCy0LvRj9C10YIg0LjRhSDQvdCwINGB0YLRgNCw0L3QuNGG0YNcblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2luZm8udGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fdXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LTQsNC90L3Ri9C1INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDRgSDRgdC10YDQstC10YDQsFxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LzQsNGB0YHQuNCyINC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LBcblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8g0JjQt9C80LXQvdGP0LXQvCDQtNCw0L3QvdGL0LUg0L4g0L/QvtC70YzQt9C70LLQsNGC0LXQu9C1INC90LAg0YHQtdGA0LLQtdGA0LVcblxuICBzZXRVc2VySW5mbyhnZXRJbnB1dFZhbHVlKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBnZXRJbnB1dFZhbHVlLm5hbWUsXG4gICAgICAgIGFib3V0OiBnZXRJbnB1dFZhbHVlLmluZm9cbiAgICAgIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8g0J/QtdGA0LXQtNCw0LXQvCDQtNCw0L3QvdGL0LUg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4XG5cbiAgYWRkQ2FyZCh1c2VyQ2FyZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiB1c2VyQ2FyZC5uYW1lLFxuICAgICAgICBsaW5rOiB1c2VyQ2FyZC5saW5rXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vINCj0LTQsNC70Y/QtdC8INC00LDQvdC90YvQtSDQutCw0YDRgtC+0YfQutC4XG5cbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgICAgfSk7XG4gIH1cblxuICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LrQsNGA0YLQvtGH0LrQtSDQu9Cw0LnQulxuXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8g0KPQtNCw0LvRj9C10Lwg0LvQsNC50LpcblxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vINCe0YLQv9GA0LDQstC70Y/QtdC8INGB0YHRi9C70LrRgyDQvdCwINGB0LzQtdC90YMg0LDQstCw0YLQsNGA0LBcblxuICBjaGFuZ2VBdmF0YXIoZ2V0SW5wdXRWYWx1ZSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogZ2V0SW5wdXRWYWx1ZS5saW5rXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgICB9KTtcbiAgfVxufVxuIiwiY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fZGlzYWJsZWQnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcbn07XG5cbmNvbnN0IGFwaUNvbmZpZyA9IHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjAnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzAwNzFlNTIzLTBhOTMtNDUxOC04NGZhLTIyYWU2NDVhZWRlZCcsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICB9XG59XG5cbmNvbnN0IGxhcmdlUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2xhcmdlLXBob3RvJyk7XG5jb25zdCBjYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ0bicpO1xuY29uc3QgYXZhdGFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1idG4nKTtcbmNvbnN0IHBsYWNlQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idG4nKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlLXRleHQnKTtcbmNvbnN0IHByb2ZpbGVJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3N1YnRpdGxlJyk7XG5jb25zdCBlbGVtZW50c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlzdCcpO1xuY29uc3QgYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1pbWFnZScpO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmV4cG9ydCB7XG4gIGxhcmdlUGhvdG8sXG4gIGNhcHRpb24sXG4gIHByb2ZpbGVFZGl0QnRuLFxuICBwbGFjZUFkZEJ0bixcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVJbmZvLFxuICBlbGVtZW50c0NvbnRhaW5lcixcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgYXZhdGFyLFxuICBhdmF0YXJCdG4sXG4gIGFwaUNvbmZpZ1xufTtcbiIsIi8vINCY0LzQv9C+0YDRgtC40YDRg9C10Lwg0LTQsNC90L3Ri9C1INC4INGB0L7QvtGC0LLQtdGC0YHRgtCy0YPRjtGJ0LjRhSDQvNC+0LTRg9C70LXQuVxuXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMv0KFhcmQuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgUG9wdXBDYXJkRGVsZXRlIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cENhcmREZWxldGUuanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IHsgcHJvZmlsZUVkaXRCdG4sIHBsYWNlQWRkQnRuLCBwcm9maWxlTmFtZSwgcHJvZmlsZUluZm8sIGVsZW1lbnRzQ29udGFpbmVyLCB2YWxpZGF0aW9uQ29uZmlnLCBhdmF0YXIsIGF2YXRhckJ0biwgYXBpQ29uZmlnIH0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMnO1xuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8g0KHQvtC30LTQsNC10Lwg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCBTZWN0aW9uINGB0L4g0YHQu9Cw0LHRi9C8INGB0LLRj9C30YvQstCw0L3QuNC10Lwg0YEg0LrQu9Cw0YHRgdC+0Lwg0KFhcmRcbi8vIFNlY3Rpb24g0L7RgtCy0LXRh9Cy0LXRgiDQt9CwINC+0YLRgNC40YHQvtCy0LrRgyDQutCw0YDRgtC+0YfQtdC6LlxuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKChpdGVtLCB1c2VySWQpID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0sIHVzZXJJZCk7XG4gIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xufSwgZWxlbWVudHNDb250YWluZXIpO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaUNvbmZpZyk7XG5cbi8vIGPQvtCx0LjRgNCw0LXQvCDRjdC60LfQtdC80L/Qu9GP0YDRiyDQutC70LDRgdGB0LAgRm9ybVZhbGlkYXRvciDQsiDQvtCx0YrQtdC60YJcblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fVxuXG4vLyDQktC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4XG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSlcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcbiAgICAvLyDQv9C+0LvRg9GH0LDQtdC8INC00LDQvdC90YvQtSDQuNC3INCw0YLRgNC40LHRg9GC0LAgYG5hbWVgINGDINGE0L7RgNC80YtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZyk7XG5cbi8vINCh0L7Qt9C00LDQtdC8INGN0LrRgdC30LXQvNC/0LvRj9GA0Ysg0LrQu9Cw0YHRgdCwIFBvcHVwV2l0aEZvcm0g0LTQu9GPINGE0L7RgNC80Ysg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuLy8g0Lgg0YTQvtGA0LzRiyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5cbmNvbnN0IHBvcHVwV2l0aEZvcm1BZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnI3BvcHVwX2FkZCcsIGFkZFBsYWNlKTtcbnBvcHVwV2l0aEZvcm1BZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBXaXRoRm9ybUVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnI3BvcHVwX2VkaXQnLCBhZGRQcm9maWxlSW5mbyk7XG5wb3B1cFdpdGhGb3JtRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cFdpdGhGb3JtQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNwb3B1cF9jaGFuZ2VBdmF0YXInLCBjaGFuZ2VBdmF0YXIpO1xucG9wdXBXaXRoRm9ybUF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyDQodC+0LfQtNCw0LXQvCDRjdC60YHQt9C10LzQv9C70Y/RgNGLINC60LvQsNGB0YHQsCBVc2VySW5mb1xuXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHsgbmFtZTogcHJvZmlsZU5hbWUsIGluZm86IHByb2ZpbGVJbmZvLCBhdmF0YXI6IGF2YXRhciB9KTtcblxuLy8g0KHQvtC30LTQsNC10Lwg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCBQb3B1cFdpdGhJbWFnZVxuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI3BvcHVwX3Bob3RvJyk7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyDQodC+0LfQtNCw0LXQvCDRjdC60LfQtdC80L/Qu9GP0YAg0LrQu9Cw0YHRgdCwIFBvcHVwQ2FyZERlbGV0ZVxuXG5jb25zdCBwb3B1cENhcmREZWxldGUgPSBuZXcgUG9wdXBDYXJkRGVsZXRlKCcjcG9wdXBfZGVsZXRlJywgcmVtb3ZlUGxhY2UpO1xucG9wdXBDYXJkRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vINCt0LrQt9C10LzQv9C70Y/RgNGLINC60LvQsNGB0YHQsCBBcGkg0LTQu9GPINC/0LXRgNCy0L7QvdCw0YfQsNC70YzQvdC+0LPQviDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC60LDRgNGC0L7Rh9C10Lpcbi8vINC4INC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0YDQvtGE0LjQu9C1INGBINGB0LXRgNCy0LXRgNCwXG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgdXNlci5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgdXNlci5pZCA9IHVzZXJEYXRhLl9pZDtcblxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGNhcmRzLCB1c2VyLmlkKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcblxuLy8g0KTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQutCw0YDRgtC+0YfQutC4XG4vLyDQodC+0LfQtNCw0LXRgiDRjdC60LfQtdC80L/Qu9GP0YAg0LrQu9Cw0YHRgdCwIENhcmRcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkQ29uZmlnLCB1c2VySWQpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmRDb25maWcsICcuZWxlbWVudC10ZW1wbGF0ZScsIG9wZW5Qb3B1cEltYWdlLCBvcGVuUG9wdXBEZWxldGUsIHVzZXJJZCwgYWRkTGlrZUNhcmQsIHJlbW92ZUxpa2VDYXJkKTtcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbi8vINCk0YPQvdC60YbQuNGPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cblxuZnVuY3Rpb24gb3BlbkZvcm1FZGl0KCkge1xuICBwb3B1cFdpdGhGb3JtRWRpdC5vcGVuKCk7XG4gIGZvcm1WYWxpZGF0b3JzWydlZGl0Rm9ybSddLnJlc2V0VmFsaWRhdGlvbigpO1xuXG4gIGNvbnN0IHsgbmFtZSwgaW5mbyB9ID0gdXNlci5nZXRVc2VySW5mbygpO1xuICBwb3B1cFdpdGhGb3JtRWRpdC5zZXRJbnB1dFZhbHVlcyh7IG5hbWUsIGluZm8gfSk7XG59XG5cbi8vINCk0YPQvdC60YbQuNGPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcblxuZnVuY3Rpb24gb3BlbkZvcm1BZGQoKSB7XG4gIHBvcHVwV2l0aEZvcm1BZGQub3BlbigpO1xuICBmb3JtVmFsaWRhdG9yc1snYWRkRm9ybSddLnJlc2V0VmFsaWRhdGlvbigpO1xufVxuXG4vLyDQpNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDRgSDRhNC+0YLQvtCz0YDQsNGE0LjQtdC5XG5cbmZ1bmN0aW9uIG9wZW5Qb3B1cEltYWdlKGltYWdlLCB0aXRsZSkge1xuICBwb3B1cFdpdGhJbWFnZS5vcGVuKGltYWdlLCB0aXRsZSk7XG59XG5cbi8vINCk0YPQvdC60YbQuNGPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuXG5mdW5jdGlvbiBvcGVuUG9wdXBEZWxldGUoY2FyZElkLCBjYXJkRWxlbWVudCkge1xuICBwb3B1cENhcmREZWxldGUub3BlbihjYXJkSWQsIGNhcmRFbGVtZW50KTtcbn1cblxuLy8g0KTRg9C90LrRhtC40Y8g0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0LjQt9C80LXQvdC10L3QuNGPINCw0LLQsNGC0LDRgNCwXG5cbmZ1bmN0aW9uIG9wZW5Qb3B1cEF2YXRhcigpIHtcbiAgcG9wdXBXaXRoRm9ybUF2YXRhci5vcGVuKCk7XG4gIGZvcm1WYWxpZGF0b3JzWydjaGFuZ2VBdmF0YXJGb3JtJ10ucmVzZXRWYWxpZGF0aW9uKCk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vINCk0YPQvdC60YbQuNC4INC40LfQvNC10L3QtdC90LjRjyDQuNC90YTQvtGA0LzQsNGG0LjQuCDQsiDQv9GA0L7RhNC40LvQtSDQuCDQtNC+0LHQsNCy0LvQtdC90LjRj1xuLy8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4ICjRgSDRgdC+0LfQtNCw0L3QuNC10Lwg0Y3QutC30LXQvNC/0LvRj9GA0LAg0LrQu9Cw0YHRgdCwIENhcmQpINC/0YDQuCDQvdCw0LbQsNGC0LjQuCDQvdCwIHN1Ym1pdFxuXG5mdW5jdGlvbiBhZGRQcm9maWxlSW5mbyhnZXRJbnB1dFZhbHVlKSB7XG4gIHJldHVybiBhcGkuc2V0VXNlckluZm8oZ2V0SW5wdXRWYWx1ZSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICB1c2VyLnNldFVzZXJJbmZvKHJlcyk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBhZGRQbGFjZShnZXRJbnB1dFZhbHVlKSB7XG4gIGNvbnN0IHVzZXJDYXJkID0ge1xuICAgIG5hbWU6IGdldElucHV0VmFsdWUubmFtZSxcbiAgICBsaW5rOiBnZXRJbnB1dFZhbHVlLmxpbmtcbiAgfTtcblxuICByZXR1cm4gYXBpLmFkZENhcmQodXNlckNhcmQpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcywgdXNlci5pZCk7XG4gICAgICBjYXJkTGlzdC5wcmVwZW5kSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxufVxuXG4vLyDQpNGD0L3QutGG0LjQuCDQuNC30LzQtdC90LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcblxuZnVuY3Rpb24gY2hhbmdlQXZhdGFyKGdldElucHV0VmFsdWUpIHtcbiAgcmV0dXJuIGFwaS5jaGFuZ2VBdmF0YXIoZ2V0SW5wdXRWYWx1ZSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICB1c2VyLnNldFVzZXJJbmZvKHJlcyk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxufVxuXG4vLyDQpNGD0L3QutGG0LjQuCDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcblxuZnVuY3Rpb24gcmVtb3ZlUGxhY2UoY2FyZElkLCBjYXJkRWxlbWVudCkge1xuICBhcGkucmVtb3ZlQ2FyZChjYXJkSWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICBwb3B1cENhcmREZWxldGUuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xufVxuXG4vLyDQpNGD0L3QutGG0LjQuCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQu9Cw0LnQutCwXG5cbmZ1bmN0aW9uIGFkZExpa2VDYXJkKGNhcmRJZCwgY2FyZCkge1xuICBhcGkuYWRkTGlrZShjYXJkSWQpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY2FyZC5jaGFuZ2VMaWtlUXVhbnRpdHkocmVzKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xufVxuXG4vLyDQpNGD0L3QutGG0LjQuCDRg9C00LDQu9C10L3QuNGPINC70LDQudC60LBcblxuZnVuY3Rpb24gcmVtb3ZlTGlrZUNhcmQoY2FyZElkLCBjYXJkKSB7XG4gIGFwaS5yZW1vdmVMaWtlKGNhcmRJZClcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjYXJkLmNoYW5nZUxpa2VRdWFudGl0eShyZXMpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGB0LvRg9GI0LDRgtC10LvQuCDRgdC+0LHRi9GC0LjQuSDQvdCwINC60L3QvtC/0LrQuCDQvtGC0LrRgNGL0YLQuNGPINGE0L7RgNC8XG5cbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkZvcm1FZGl0KTtcbnBsYWNlQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkZvcm1BZGQpO1xuYXZhdGFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwQXZhdGFyKTtcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9pbnB1dExpc3QiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJlbmFibGVTdWJtaXRCdXR0b24iLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsIkNhcmQiLCJjYXJkRGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlIiwidXNlcklkIiwiYWRkTGlrZUNhcmQiLCJyZW1vdmVMaWtlQ2FyZCIsIl90aXRsZSIsIm5hbWUiLCJfaW1hZ2UiLCJsaW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfb3duZXJJZCIsIm93bmVyIiwiX2lkIiwiX2NhcmRJZCIsIl91c2VySWQiLCJfYWx0SW1hZ2UiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9hZGRMaWtlIiwiX3JlbW92ZUxpa2UiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJsaWtlIiwiX2J0bkxpa2UiLCJxdWFudGl0eSIsIl9lbGVtZW50UXVhbnRpdHkiLCJsZW5ndGgiLCJ0b2dnbGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9lbGVtZW50SW1hZ2UiLCJfZWxlbWVudERlbGV0ZUJ0biIsIl9jaGFuZ2VMaWtlSW1hZ2VTdGF0dXMiLCJzcmMiLCJhbHQiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImxlbmdodCIsIl9vcGVuUG9wdXBJbWFnZSIsIl9vcGVuUG9wdXBEZWxldGUiLCJfY2hhbmdlTGlrZUNhcmQiLCJTZWN0aW9uIiwicmVuZGVyZXIiLCJjb250YWluZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJfaXRlbXMiLCJpdGVtcyIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfbGFyZ2VQaG90byIsIl9jYXB0aW9uIiwiaW1hZ2UiLCJ0aXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXRGb3JtIiwiX2hhbmRsZVN1Ym1pdEZvcm0iLCJfcG9wdXBGb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsImlucHV0RGF0YSIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJpbml0aWFsVGV4dCIsIl9nZXRJbnB1dFZhbHVlIiwidGhlbiIsImZpbmFsbHkiLCJyZXNldCIsImRhdGEiLCJpbnB1dCIsIlBvcHVwQ2FyZERlbGV0ZSIsImhhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsImNhcmRJZCIsImNhcmRFbGVtZW50IiwiX2NhcmRFbGVtZW50IiwiVXNlckluZm8iLCJpbmZvIiwiYXZhdGFyIiwiX25hbWUiLCJfaW5mbyIsIl9hdmF0YXIiLCJhYm91dCIsIkFwaSIsIm9wdGlvbnMiLCJfdXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIl9jaGVja1Jlc3BvbnNlIiwiZ2V0SW5wdXRWYWx1ZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXNlckNhcmQiLCJwcm9maWxlRWRpdEJ0biIsImF2YXRhckJ0biIsInBsYWNlQWRkQnRuIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSW5mbyIsImVsZW1lbnRzQ29udGFpbmVyIiwiY29uZmlnIiwiY2FyZExpc3QiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsImFwaSIsImF1dGhvcml6YXRpb24iLCJmb3JtVmFsaWRhdG9ycyIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwV2l0aEZvcm1BZGQiLCJhZGRDYXJkIiwidXNlciIsInByZXBlbmRJdGVtIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cFdpdGhGb3JtRWRpdCIsInNldFVzZXJJbmZvIiwicG9wdXBXaXRoRm9ybUF2YXRhciIsImNoYW5nZUF2YXRhciIsInBvcHVwV2l0aEltYWdlIiwicG9wdXBDYXJkRGVsZXRlIiwicmVtb3ZlQ2FyZCIsImNhcmRDb25maWciLCJvcGVuUG9wdXBJbWFnZSIsIm9wZW5Qb3B1cERlbGV0ZSIsImdlbmVyYXRlQ2FyZCIsIm9wZW4iLCJjYXJkIiwiYWRkTGlrZSIsImNoYW5nZUxpa2VRdWFudGl0eSIsInJlbW92ZUxpa2UiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsInVzZXJEYXRhIiwiY2FyZHMiLCJyZW5kZXJJdGVtcyIsInJlc2V0VmFsaWRhdGlvbiIsInNldElucHV0VmFsdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==