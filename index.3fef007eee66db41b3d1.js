(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n}var n,r;return n=t,(r=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));n.textContent=e,t.classList.add(this._inputErrorClass),n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.textContent="",t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableSubmitButton():this.enableSubmitButton()}},{key:"enableSubmitButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"_setEventListeners",value:function(){var t=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function t(e,n,r,o,i,u,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._title=e.name,this._image=e.link,this._likes=e.likes,this._ownerId=e.owner._id,this._cardId=e._id,this._userId=i,this._altImage="фотография "+e.name,this._templateSelector=n,this._handleCardClick=r,this._handleCardDelete=o,this._addLike=u,this._removeLike=c}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_changeLikeImageStatus",value:function(){var t=this;this._likes.forEach((function(e){e._id===t._userId&&t._element.querySelector(".element__btn-like").classList.add("element__btn-like_active")}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._userId===this._ownerId&&this._element.querySelector(".element__delete-btn").classList.add("element__delete-btn_visible"),this._changeLikeImageStatus(),this._elementImage=this._element.querySelector(".element__image"),this._setEventListeners(),this._element.querySelector(".element__text").textContent=this._title,this._element.querySelector(".element__like-quantity").textContent=this._likes.length,this._elementImage.src=this._image,this._elementImage.alt=this._altImage,this._element}},{key:"_openPopupImage",value:function(){this._handleCardClick(this._image,this._title)}},{key:"_openPopupDelete",value:function(){this._handleCardDelete(this._cardId,this._element)}},{key:"_changeLikeCard",value:function(t){t.target.classList.contains("element__btn-like_active")?this._removeLike(this._cardId,this._element,this._likes.lenght):this._addLike(this._cardId,this._element,this._likes.lenght),t.target.classList.toggle("element__btn-like_active")}},{key:"_setEventListeners",value:function(){var t=this;this._elementImage.addEventListener("click",(function(){t._openPopupImage()})),this._element.querySelector(".element__delete-btn").addEventListener("click",(function(){t._openPopupDelete()})),this._element.querySelector(".element__btn-like").addEventListener("click",(function(e){t._changeLikeCard(e)}))}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._container=n}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.append(t)}},{key:"prependItem",value:function(t){this._container.prepend(t)}},{key:"renderItem",value:function(){this._renderer(this._items)}},{key:"renderItems",value:function(t,e){var n=this;t.forEach((function(t){n._renderer(t,e)}))}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===l(o)?o:String(o)),r)}var o}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.querySelector(".popup__close-btn").addEventListener("click",(function(){return t.close()})),this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.close()}))}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},h.apply(this,arguments)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(o){var n=d(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._largePhoto=e._popup.querySelector(".popup__large-photo"),e._caption=e._popup.querySelector(".popup__caption"),e}return e=u,(n=[{key:"open",value:function(t,e){h(d(u.prototype),"open",this).call(this),this._largePhoto.src=t,this._largePhoto.alt="фотография "+t,this._caption.textContent=e}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(this,arguments)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(r);if(o){var n=w(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleSubmitForm=e,n._inputList=Array.from(n._popup.querySelectorAll(".popup__input")),n._popupForm=n._popup.querySelector(".popup__form"),n}return e=u,(n=[{key:"_getInputValue",value:function(){var t={};return this._inputList.forEach((function(e){t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var t=this;g(w(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmitForm(t._getInputValue())}))}},{key:"close",value:function(){g(w(u.prototype),"close",this).call(this),this._popupForm.reset()}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},O.apply(this,arguments)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=C(r);if(o){var n=C(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleDeleteCard=e,n}return e=u,(n=[{key:"open",value:function(t,e){O(C(u.prototype),"open",this).call(this),this._cardId=t,this._cardElement=e}},{key:"setEventListeners",value:function(){var t=this;O(C(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(e){e.preventDefault(),t._handleDeleteCard(t._cardId,t._cardElement)}))}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===I(o)?o:String(o)),r)}var o}var T=function(){function t(e){var n=e.name,r=e.info;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n,this._info=r}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,info:this._info.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about;this._name.textContent=e,this._info.textContent=n}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}var B,D=function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))},A=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.baseUrl,this._headers=e.headers}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(D)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(D)}},{key:"setUserInfo",value:function(t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.info})}).then(D)}},{key:"addCard",value:function(t){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then(D)}},{key:"removeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(D)}},{key:"addLike",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then(D)}},{key:"removeLike",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then(D)}},{key:"changeAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.link})}).then(D)}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),U=(document.querySelector(".popup__large-photo"),document.querySelector(".popup__caption"),document.querySelector("#name-input")),V=document.querySelector("#info-input"),F=document.querySelector(".profile__edit-btn"),N=document.querySelector(".profile__avatar-btn"),J=document.querySelector(".profile__add-btn"),H=document.querySelector(".profile__title-text"),z=document.querySelector(".profile__subtitle"),M=document.querySelector(".elements__list"),G=document.querySelector(".profile__avatar-image"),K=document.querySelector("#popupEdit__button"),Q=document.querySelector("#popupAdd__button"),W=document.querySelector("#popupChangeAvatar__button"),X=new a((function(t,e){var n=ut(t,e);X.addItem(n)}),M),Y=new A({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"0071e523-0a93-4518-84fa-22ae645aeded","Content-Type":"application/json"}}),Z={};B={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(B.formSelector)).forEach((function(t){var e=new n(B,t),r=t.getAttribute("name");Z[r]=e,e.enableValidation()}));var $=new k("#popup_add",(function(t){var e={name:t.name,link:t.link},n=Q.textContent;it(!0,Q,n),Y.addCard(e).then((function(t){var e=ut(t,nt.id);X.prependItem(e)})).catch((function(t){console.log(t)})).finally((function(){it(!1,Q,n)})),$.close()}));$.setEventListeners();var tt=new k("#popup_edit",(function(t){var e=K.textContent;it(!0,K,e),Y.setUserInfo(t).then((function(t){nt.setUserInfo(t)})).catch((function(t){console.log(t)})).finally((function(){it(!1,K,e)})),tt.close()}));tt.setEventListeners();var et=new k("#popup_changeAvatar",(function(t){var e=W.textContent;it(!0,W,e),Y.changeAvatar(t).then((function(t){G.src=t.avatar})).catch((function(t){console.log(t)})).finally((function(){it(!1,W,e)})),et.close()}));et.setEventListeners();var nt=new T({name:H,info:z}),rt=new v("#popup_photo");rt.setEventListeners();var ot=new L("#popup_delete",(function(t,e){Y.removeCard(t).then((function(){e.remove(),ot.close()})).catch((function(t){console.log(t)}))}));function it(t,e,n){e.textContent=t?"Сохранение...":n}function ut(t,e){return new i(t,".element-template",ct,at,e,lt,st).generateCard()}function ct(t,e){rt.open(t,e)}function at(t,e){ot.open(t,e)}function lt(t){var e=this;Y.addLike(t).then((function(t){e._element.querySelector(".element__like-quantity").textContent=t.likes.length})).catch((function(t){console.log(t)}))}function st(t){var e=this;Y.removeLike(t).then((function(t){e._element.querySelector(".element__like-quantity").textContent=t.likes.length})).catch((function(t){console.log(t)}))}ot.setEventListeners(),Y.getInitialCards().then((function(t){X.renderItems(t,nt.id)})).catch((function(t){console.log(t)})),Y.getUserInfo().then((function(t){nt.setUserInfo(t),G.src=t.avatar,nt.id=t._id})).catch((function(t){console.log(t)})),F.addEventListener("click",(function(){tt.open(),Z.editForm.resetValidation(),U.value=H.textContent,V.value=z.textContent})),J.addEventListener("click",(function(){$.open(),Z.addForm.resetValidation()})),N.addEventListener("click",(function(){et.open(),Z.changeAvatarForm.resetValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBWTVJLFlBQzlCd0ksRUFBVXZDLE1BQVE0QyxFQUFZN0ksV0FDaEMsSUFtSUEySSxFQUFZdEgsaUJBQWlCLFNBL0g3QixXQUNFdUksRUFBaUJ5QixPQUNqQjlCLEVBQXdCLFFBQUVvQyxpQkFDNUIsSUE2SEFqRCxFQUFVckgsaUJBQWlCLFNBN0czQixXQUNFcUosR0FBb0JXLE9BQ3BCOUIsRUFBaUMsaUJBQUVvQyxpQkFDckMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy/QoWFyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cENhcmREZWxldGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICAvLyDQnNC10YLQvtC00Ysg0L/QvtC60LDQt9CwINC4INGB0LrRgNGL0YLQuNGPINGB0L7QvtCx0YnQtdC90LjRjyDQvtCxINC+0YjQuNCx0LrQtSDQstCw0LvQuNC00LDRhtC40LhcblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvLyDQnNC10YLQvtC0INC/0YDQvtCy0LXRgNC60Lgg0LLQsNC70LjQtNCw0YbQuNC4XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8vINCc0LXRgtC+0LTRiyDQuNC30LzQtdC90LXQvdC40Y8g0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuFxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5hYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgZW5hYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vINCc0LXRgtC+0LQg0YPRgdGC0LDQvdC+0LLQutC4INGB0LvRg9GI0LDRgtC10LvRjyDRgdC+0LHRi9GC0LjQuSDQvdCwINC/0L7Qu9GPINGE0L7RgNC80YtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vINCf0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0LCDQt9Cw0L/Rg9GB0LrQsNGO0YnQuNC5INCy0LDQu9C40LTQsNGG0LjRjlxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUNhcmREZWxldGUsIHVzZXJJZCwgYWRkTGlrZUNhcmQsIHJlbW92ZUxpa2VDYXJkKSB7XG4gICAgdGhpcy5fdGl0bGUgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2ltYWdlID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLl9saWtlcyA9IGNhcmREYXRhLmxpa2VzO1xuICAgIHRoaXMuX293bmVySWQgPSBjYXJkRGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5fY2FyZElkID0gY2FyZERhdGEuX2lkO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9hbHRJbWFnZSA9IFwi0YTQvtGC0L7Qs9GA0LDRhNC40Y8gXCIgKyBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcbiAgICB0aGlzLl9hZGRMaWtlID0gYWRkTGlrZUNhcmQ7XG4gICAgdGhpcy5fcmVtb3ZlTGlrZSA9IHJlbW92ZUxpa2VDYXJkO1xuICB9XG5cbiAgLy8g0J/QvtC70YPRh9Cw0LXQvCDRgNCw0LfQvNC10YLQutGDINC40LcgdGVtcGxhdGUt0Y3Qu9C10LzQtdC90YLQsCDQuCDQutC70L7QvdC40YPRgNC10Lwg0LXQtVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBlbGVtZW50VGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGVsZW1lbnRUZW1wbGF0ZTtcbiAgfVxuXG4gIC8vINCc0LXRgtC+0LQg0L/RgNC+0LLQtdGA0LrQuCDQvdCw0YjQuNGFINC70LDQudC60L7QsiDQv9GA0Lgg0L/QtdGA0LXQt9Cw0LPRgNGD0LfQutC1INGB0YLRgNCw0L3QuNGG0Ysg0LTQu9GPINGB0L7RhdGA0LDQvdC10L3QuNGPINCw0LrRgtC40LLQvdC+0LPQviDRgdGC0LDRgtGD0YHQsFxuXG4gIF9jaGFuZ2VMaWtlSW1hZ2VTdGF0dXMoKSB7XG4gICAgdGhpcy5fbGlrZXMuZm9yRWFjaChsaWtlID0+IHtcbiAgICAgIGlmIChsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2J0bi1saWtlJykuY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fYnRuLWxpa2VfYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyDQn9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDQv9C+0LTQs9C+0YLQvtCy0LrQuCDQutCw0YDRgtC+0YfQutC4INC6INC/0YPQsdC70LjQutCw0YbQuNC4XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgaWYgKHRoaXMuX3VzZXJJZCA9PT0gdGhpcy5fb3duZXJJZCkge1xuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlLWJ0bicpLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2RlbGV0ZS1idG5fdmlzaWJsZScpO1xuICAgIH1cblxuICAgIHRoaXMuX2NoYW5nZUxpa2VJbWFnZVN0YXR1cygpO1xuXG4gICAgdGhpcy5fZWxlbWVudEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGV4dCcpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1xdWFudGl0eScpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9pbWFnZTtcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2UuYWx0ID0gdGhpcy5fYWx0SW1hZ2U7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIC8vINCc0LXRgtC+0LQg0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0YEg0YDQsNC30LLQtdGA0L3Rg9GC0L7QuSDRhNC+0YLQvtCz0YDQsNGE0LjQtdC5XG5cbiAgX29wZW5Qb3B1cEltYWdlKCkge1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9pbWFnZSwgdGhpcy5fdGl0bGUpO1xuICB9XG5cbiAgLy8g0JzQtdGC0L7QtCDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcblxuICBfb3BlblBvcHVwRGVsZXRlKCkge1xuICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUodGhpcy5fY2FyZElkLCB0aGlzLl9lbGVtZW50KTtcbiAgfVxuXG4gIC8vINCc0LXRgtC+0LQg0LjQt9C80LXQvdC10L3QuNGPINGB0YfQtdGC0YfQuNC60LAg0LvQsNC50LrQvtCyINC4INC40LfQvNC10L3QtdC90LjRjyDRhtCy0LXRgtCwXG5cbiAgX2NoYW5nZUxpa2VDYXJkKGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWxlbWVudF9fYnRuLWxpa2VfYWN0aXZlJykpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUxpa2UodGhpcy5fY2FyZElkLCB0aGlzLl9lbGVtZW50LCB0aGlzLl9saWtlcy5sZW5naHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hZGRMaWtlKHRoaXMuX2NhcmRJZCwgdGhpcy5fZWxlbWVudCwgdGhpcy5fbGlrZXMubGVuZ2h0KTtcbiAgICB9O1xuXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19idG4tbGlrZV9hY3RpdmUnKTtcbiAgfVxuXG4gIC8vINCc0LXRgtC+0LQg0YPRgdGC0LDQvdC+0LLQutC4INGB0LvRg9GI0LDRgtC10LvQtdC5INGB0L7QsdGL0YLQuNC5XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5fb3BlblBvcHVwSW1hZ2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZS1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX29wZW5Qb3B1cERlbGV0ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fYnRuLWxpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcblxuICAgICAgdGhpcy5fY2hhbmdlTGlrZUNhcmQoZXZ0KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBjb250YWluZXIpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgfVxuXG4gIC8vINCU0L7QsdCw0LLQu9GP0LXQvCBET00t0Y3Qu9C10LzQtdC90YLRiyDQsiDQutC+0L3QtdGC0LnQvdC10YBcblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgcHJlcGVuZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgcmVuZGVySXRlbSgpIHtcbiAgICB0aGlzLl9yZW5kZXJlcih0aGlzLl9pdGVtcyk7XG4gIH1cblxuICAvLyDQn9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCwg0L7RgtCy0LXRh9Cw0Y7RidC40Lkg0LfQsCDQvtGC0YDQuNGB0L7QstC60YMg0LLRgdC10YUg0LrQsNGA0YLQvtGH0LXQulxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zLCB1c2VySWQpIHtcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSwgdXNlcklkKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8vINCf0YPQsdC70LjRh9C90YvQtSDQvNC10YLQvtC00Ysg0L7RgtC60YDRi9GC0LjRjyDQuCDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QvtCyXG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIC8vINCf0YDQuNCy0LDRgtC90YvQuSDQvNC10YLQvtC00Ysg0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0L3QsCBFc2NhcGVcblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8g0KPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YHQu9GD0YjQsNGC0LXQu9C4INC90LAg0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0L/QviDQutC90L7Qv9C60LUg0Lgg0L/QviDQutC70LjQutGDINC90LAgb3ZlcmxheVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9sYXJnZVBob3RvID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19sYXJnZS1waG90bycpO1xuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcbiAgfVxuXG4gIC8vINCf0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwINGBINGE0L7RgtC+0LPRgNCw0YTQuNC10LlcblxuICBvcGVuKGltYWdlLCB0aXRsZSkge1xuICAgIHN1cGVyLm9wZW4oKTtcblxuICAgIHRoaXMuX2xhcmdlUGhvdG8uc3JjID0gaW1hZ2U7XG4gICAgdGhpcy5fbGFyZ2VQaG90by5hbHQgPSBcItGE0L7RgtC+0LPRgNCw0YTQuNGPIFwiICsgaW1hZ2U7XG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IHRpdGxlO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZvcm0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtID0gaGFuZGxlU3VibWl0Rm9ybTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gIH1cblxuICAvLyDQodC+0LHQuNGA0LDQtdC8INC00LDQvdC90YvQtSDQstGB0LXRhSDQv9C+0LvQtdC5INGE0L7RgNC80YtcblxuICBfZ2V0SW5wdXRWYWx1ZSgpIHtcbiAgICBjb25zdCBpbnB1dERhdGEgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dERhdGFbaW5wdXRFbGVtZW50Lm5hbWVdID0gaW5wdXRFbGVtZW50LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dERhdGE7XG4gIH1cblxuICAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDRgdC70YPRiNCw0YLQtdC70Lgg0YHQvtCx0YvRgtC40LlcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZSgpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQsiDQvNC10YLQvtC0IGNsb3NlINGB0LHRgNC+0YEg0YTQvtGA0LzRi1xuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDYXJkRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVEZWxldGVDYXJkKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XG4gIH1cblxuICBvcGVuKGNhcmRJZCwgY2FyZEVsZW1lbnQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fY2FyZElkID0gY2FyZElkO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzLl9jYXJkSWQsIHRoaXMuX2NhcmRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgaW5mbyB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5faW5mbyA9IGluZm87XG4gIH1cblxuICAvLyDQnNC10YLQvtC0INC/0L7QtNGB0YLQsNCy0LvRj9C10YIg0LTQsNC90L3Ri9C1INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQv9GA0Lgg0L7RgtC60YDRi9GC0LjQuCDRgdGC0YDQsNC90LjRhtGLXG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgZGVmYXVsdEluZm8gPSB7IG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsIGluZm86IHRoaXMuX2luZm8udGV4dENvbnRlbnQgfTtcbiAgICByZXR1cm4gZGVmYXVsdEluZm87XG4gIH1cblxuICAvLyDQnNC10YLQvtC0INC/0YDQuNC90LjQvNCw0LXRgiDQvdC+0LLRi9C1INC00LDQvdC90YvQtSDRgSDRhNC+0YDQvNGLINC4INC00L7QsdCw0LLQu9GP0LXRgiDQuNGFINC90LAg0YHRgtGA0LDQvdC40YbRg1xuXG4gIHNldFVzZXJJbmZvKHtuYW1lLCBhYm91dH0pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9pbmZvLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cbn1cbiIsImNvbnN0IGhhbmRsZVJlc3BvbnNlID0gKHJlcykgPT4ge1xuICBpZiAocmVzLm9rKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gIH1cbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX3VybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgLy8g0J/QvtC70YPRh9Cw0LXQvCDQtNCw0L3QvdGL0LUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INGBINGB0LXRgNCy0LXRgNCwXG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LzQsNGB0YHQuNCyINC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LBcblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vINCY0LfQvNC10L3Rj9C10Lwg0LTQsNC90L3Ri9C1INC+INC/0L7Qu9GM0LfQu9Cy0LDRgtC10LvQtSDQvdCwINGB0LXRgNCy0LXRgNC1XG5cbiAgc2V0VXNlckluZm8oZ2V0SW5wdXRWYWx1ZSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZ2V0SW5wdXRWYWx1ZS5uYW1lLFxuICAgICAgICBhYm91dDogZ2V0SW5wdXRWYWx1ZS5pbmZvXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbihoYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvLyDQn9C10YDQtdC00LDQtdC8INC00LDQvdC90YvQtSDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcblxuICBhZGRDYXJkKHVzZXJDYXJkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IHVzZXJDYXJkLm5hbWUsXG4gICAgICAgIGxpbms6IHVzZXJDYXJkLmxpbmtcbiAgICAgIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vINCj0LTQsNC70Y/QtdC8INC00LDQvdC90YvQtSDQutCw0YDRgtC+0YfQutC4XG5cbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIH0pXG5cbiAgICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQutCw0YDRgtC+0YfQutC1INC70LDQudC6XG5cbiAgYWRkTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIH0pXG5cbiAgICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vINCj0LTQsNC70Y/QtdC8INC70LDQudC6XG5cbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIH0pXG5cbiAgICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vINCe0YLQv9GA0LDQstC70Y/QtdC8INGB0YHRi9C70LrRgyDQvdCwINGB0LzQtdC90YMg0LDQstCw0YLQsNGA0LBcblxuICBjaGFuZ2VBdmF0YXIoZ2V0SW5wdXRWYWx1ZSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogZ2V0SW5wdXRWYWx1ZS5saW5rXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKTtcbiAgfVxufVxuIiwiLy8g0JjQvNC/0L7RgNGC0LjRgNGD0LXQvCDQtNCw0L3QvdGL0LUg0Lgg0YHQvtC+0YLQstC10YLRgdGC0LLRg9GO0YnQuNGFINC80L7QtNGD0LvQtdC5XG5cbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy/QoWFyZC5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cENhcmREZWxldGUgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwQ2FyZERlbGV0ZS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgeyBpbnB1dE5hbWUsIGlucHV0SW5mbywgcHJvZmlsZUVkaXRCdG4sIHBsYWNlQWRkQnRuLCBwcm9maWxlTmFtZSwgcHJvZmlsZUluZm8sIGVsZW1lbnRzQ29udGFpbmVyLCB2YWxpZGF0aW9uQ29uZmlnLCBhdmF0YXIsIGF2YXRhckJ0biwgcG9wdXBFZGl0QnRuLCBwb3B1cEFkZEJ0biwgcG9wdXBBdmF0YXJCdG4gfSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmNvbnN0IGFwaUNvbmZpZyA9IHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjAnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzAwNzFlNTIzLTBhOTMtNDUxOC04NGZhLTIyYWU2NDVhZWRlZCcsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICB9XG59XG5cbi8vINCh0L7Qt9C00LDQtdC8INGN0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAgU2VjdGlvbiDRgdC+INGB0LvQsNCx0YvQvCDRgdCy0Y/Qt9GL0LLQsNC90LjQtdC8INGBINC60LvQsNGB0YHQvtC8INChYXJkXG4vLyBTZWN0aW9uINC+0YLQstC10YfQstC10YIg0LfQsCDQvtGC0YDQuNGB0L7QstC60YMg0LrQsNGA0YLQvtGH0LXQui5cblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbigoaXRlbSwgdXNlcklkKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtLCB1c2VySWQpO1xuICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbn0sIGVsZW1lbnRzQ29udGFpbmVyKTtcblxuY29uc3QgYXBpID0gbmV3IEFwaShhcGlDb25maWcpO1xuXG4vLyBj0L7QsdC40YDQsNC10Lwg0Y3QutC30LXQvNC/0LvRj9GA0Ysg0LrQu9Cw0YHRgdCwIEZvcm1WYWxpZGF0b3Ig0LIg0L7QsdGK0LXQutGCXG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge31cblxuLy8g0JLQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuFxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgLy8g0L/QvtC70YPRh9Cw0LXQvCDQtNCw0L3QvdGL0LUg0LjQtyDQsNGC0YDQuNCx0YPRgtCwIGBuYW1lYCDRgyDRhNC+0YDQvNGLXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuXG4vLyDQodC+0LfQtNCw0LXQvCDRjdC60YHQt9C10LzQv9C70Y/RgNGLINC60LvQsNGB0YHQsCBQb3B1cFdpdGhGb3JtINC00LvRjyDRhNC+0YDQvNGLINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60Lhcbi8vINC4INGE0L7RgNC80Ysg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuXG5jb25zdCBwb3B1cFdpdGhGb3JtQWRkID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNwb3B1cF9hZGQnLCBhZGRQbGFjZSk7XG5wb3B1cFdpdGhGb3JtQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwV2l0aEZvcm1FZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNwb3B1cF9lZGl0JywgYWRkUHJvZmlsZUluZm8pO1xucG9wdXBXaXRoRm9ybUVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBXaXRoRm9ybUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjcG9wdXBfY2hhbmdlQXZhdGFyJywgY2hhbmdlQXZhdGFyKTtcbnBvcHVwV2l0aEZvcm1BdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8g0KHQvtC30LTQsNC10Lwg0Y3QutGB0LfQtdC80L/Qu9GP0YDRiyDQutC70LDRgdGB0LAgVXNlckluZm9cblxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh7IG5hbWU6IHByb2ZpbGVOYW1lLCBpbmZvOiBwcm9maWxlSW5mbyB9KTtcblxuLy8g0KHQvtC30LTQsNC10Lwg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCBQb3B1cFdpdGhJbWFnZVxuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI3BvcHVwX3Bob3RvJyk7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyDQodC+0LfQtNCw0LXQvCDRjdC60LfQtdC80L/Qu9GP0YAg0LrQu9Cw0YHRgdCwIFBvcHVwQ2FyZERlbGV0ZVxuXG5jb25zdCBwb3B1cENhcmREZWxldGUgPSBuZXcgUG9wdXBDYXJkRGVsZXRlKCcjcG9wdXBfZGVsZXRlJywgcmVtb3ZlUGxhY2UpO1xucG9wdXBDYXJkRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vINCt0LrQt9C10LzQv9C70Y/RgNGLINC60LvQsNGB0YHQsCBBcGkg0LTQu9GPINC/0LXRgNCy0L7QvdCw0YfQsNC70YzQvdC+0LPQviDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC60LDRgNGC0L7Rh9C10Lpcbi8vINC4INC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0YDQvtGE0LjQu9C1INGBINGB0LXRgNCy0LXRgNCwXG5cbmFwaS5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMocmVzLCB1c2VyLmlkKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcblxuXG5hcGkuZ2V0VXNlckluZm8oKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAgdXNlci5zZXRVc2VySW5mbyhyZXMpXG4gICAgYXZhdGFyLnNyYyA9IHJlcy5hdmF0YXI7XG4gICAgdXNlci5pZCA9IHJlcy5faWQ7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vINCk0YPQvdC60YbQuNGPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0YHRgtCw0YLRg9GB0LAg0LfQsNCz0YDRg9C30LrQuCDQv9GA0Lgg0L7RgtC/0YDQsNCy0LrQtSDRhNC+0YDQvNGLXG5cbmZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBzdWJtaXRCdG4sIHRleHRCdG5PcmlnaW5hbCkge1xuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgc3VibWl0QnRuLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcbiAgfSBlbHNlIHtcbiAgICBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0ZXh0QnRuT3JpZ2luYWw7XG4gIH1cbn1cblxuLy8g0KTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQutCw0YDRgtC+0YfQutC4XG4vLyDQodC+0LfQtNCw0LXRgiDRjdC60LfQtdC80L/Qu9GP0YAg0LrQu9Cw0YHRgdCwIENhcmRcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkQ29uZmlnLCB1c2VySWQpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmRDb25maWcsICcuZWxlbWVudC10ZW1wbGF0ZScsIG9wZW5Qb3B1cEltYWdlLCBvcGVuUG9wdXBEZWxldGUsIHVzZXJJZCwgYWRkTGlrZUNhcmQsIHJlbW92ZUxpa2VDYXJkKTtcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbi8vINCk0YPQvdC60YbQuNGPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cblxuZnVuY3Rpb24gb3BlbkZvcm1FZGl0KCkge1xuICBwb3B1cFdpdGhGb3JtRWRpdC5vcGVuKCk7XG4gIGZvcm1WYWxpZGF0b3JzWydlZGl0Rm9ybSddLnJlc2V0VmFsaWRhdGlvbigpO1xuXG4gIGlucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBpbnB1dEluZm8udmFsdWUgPSBwcm9maWxlSW5mby50ZXh0Q29udGVudDtcbn1cblxuLy8g0KTRg9C90LrRhtC40Y8g0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuXG5mdW5jdGlvbiBvcGVuRm9ybUFkZCgpIHtcbiAgcG9wdXBXaXRoRm9ybUFkZC5vcGVuKCk7XG4gIGZvcm1WYWxpZGF0b3JzWydhZGRGb3JtJ10ucmVzZXRWYWxpZGF0aW9uKCk7XG59XG5cbi8vINCk0YPQvdC60YbQuNGPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwINGBINGE0L7RgtC+0LPRgNCw0YTQuNC10LlcblxuZnVuY3Rpb24gb3BlblBvcHVwSW1hZ2UoaW1hZ2UsIHRpdGxlKSB7XG4gIHBvcHVwV2l0aEltYWdlLm9wZW4oaW1hZ2UsIHRpdGxlKTtcbn1cblxuLy8g0KTRg9C90LrRhtC40Y8g0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5cbmZ1bmN0aW9uIG9wZW5Qb3B1cERlbGV0ZShjYXJkSWQsIGNhcmRFbGVtZW50KSB7XG4gIHBvcHVwQ2FyZERlbGV0ZS5vcGVuKGNhcmRJZCwgY2FyZEVsZW1lbnQpO1xufVxuXG4vLyDQpNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDQuNC30LzQtdC90LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcblxuZnVuY3Rpb24gb3BlblBvcHVwQXZhdGFyKCkge1xuICBwb3B1cFdpdGhGb3JtQXZhdGFyLm9wZW4oKTtcbiAgZm9ybVZhbGlkYXRvcnNbJ2NoYW5nZUF2YXRhckZvcm0nXS5yZXNldFZhbGlkYXRpb24oKTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8g0KTRg9C90LrRhtC40Lgg0LjQt9C80LXQvdC10L3QuNGPINC40L3RhNC+0YDQvNCw0YbQuNC4INCyINC/0YDQvtGE0LjQu9C1INC4INC00L7QsdCw0LLQu9C10L3QuNGPXG4vLyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LggKNGBINGB0L7Qt9C00LDQvdC40LXQvCDRjdC60LfQtdC80L/Qu9GP0YDQsCDQutC70LDRgdGB0LAgQ2FyZCkg0L/RgNC4INC90LDQttCw0YLQuNC4INC90LAgc3VibWl0XG5cbmZ1bmN0aW9uIGFkZFByb2ZpbGVJbmZvKGdldElucHV0VmFsdWUpIHtcbiAgY29uc3QgdGV4dEJ0bk9yaWdpbmFsID0gcG9wdXBFZGl0QnRuLnRleHRDb250ZW50O1xuICByZW5kZXJMb2FkaW5nKHRydWUsIHBvcHVwRWRpdEJ0biwgdGV4dEJ0bk9yaWdpbmFsKTtcbiAgYXBpLnNldFVzZXJJbmZvKGdldElucHV0VmFsdWUpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlci5zZXRVc2VySW5mbyhyZXMpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBwb3B1cEVkaXRCdG4sIHRleHRCdG5PcmlnaW5hbCk7XG4gICAgfSk7XG5cbiAgcG9wdXBXaXRoRm9ybUVkaXQuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gYWRkUGxhY2UoZ2V0SW5wdXRWYWx1ZSkge1xuICBjb25zdCB1c2VyQ2FyZCA9IHtcbiAgICBuYW1lOiBnZXRJbnB1dFZhbHVlLm5hbWUsXG4gICAgbGluazogZ2V0SW5wdXRWYWx1ZS5saW5rXG4gIH07XG4gIGNvbnN0IHRleHRCdG5PcmlnaW5hbCA9IHBvcHVwQWRkQnRuLnRleHRDb250ZW50O1xuICByZW5kZXJMb2FkaW5nKHRydWUsIHBvcHVwQWRkQnRuLCB0ZXh0QnRuT3JpZ2luYWwpO1xuICBhcGkuYWRkQ2FyZCh1c2VyQ2FyZClcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQocmVzLCB1c2VyLmlkKTtcbiAgICAgIGNhcmRMaXN0LnByZXBlbmRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcG9wdXBBZGRCdG4sIHRleHRCdG5PcmlnaW5hbCk7XG4gICAgfSk7XG5cbiAgcG9wdXBXaXRoRm9ybUFkZC5jbG9zZSgpO1xufVxuXG4vLyDQpNGD0L3QutGG0LjQuCDQuNC30LzQtdC90LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcblxuZnVuY3Rpb24gY2hhbmdlQXZhdGFyKGdldElucHV0VmFsdWUpIHtcbiAgY29uc3QgdGV4dEJ0bk9yaWdpbmFsID0gcG9wdXBBdmF0YXJCdG4udGV4dENvbnRlbnQ7XG4gIHJlbmRlckxvYWRpbmcodHJ1ZSwgcG9wdXBBdmF0YXJCdG4sIHRleHRCdG5PcmlnaW5hbCk7XG4gIGFwaS5jaGFuZ2VBdmF0YXIoZ2V0SW5wdXRWYWx1ZSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBhdmF0YXIuc3JjID0gcmVzLmF2YXRhclxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBwb3B1cEF2YXRhckJ0biwgdGV4dEJ0bk9yaWdpbmFsKTtcbiAgICB9KTtcblxuICBwb3B1cFdpdGhGb3JtQXZhdGFyLmNsb3NlKCk7XG59XG5cbi8vINCk0YPQvdC60YbQuNC4INGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuXG5mdW5jdGlvbiByZW1vdmVQbGFjZShjYXJkSWQsIGNhcmRFbGVtZW50KSB7XG4gIGFwaS5yZW1vdmVDYXJkKGNhcmRJZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIHBvcHVwQ2FyZERlbGV0ZS5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbi8vINCk0YPQvdC60YbQuNC4INC00L7QsdCw0LLQu9C10L3QuNGPINC70LDQudC60LBcblxuZnVuY3Rpb24gYWRkTGlrZUNhcmQoY2FyZElkKSB7XG4gIGFwaS5hZGRMaWtlKGNhcmRJZClcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLXF1YW50aXR5JykudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbi8vINCk0YPQvdC60YbQuNC4INGD0LTQsNC70LXQvdC40Y8g0LvQsNC50LrQsFxuXG5mdW5jdGlvbiByZW1vdmVMaWtlQ2FyZChjYXJkSWQpIHtcbiAgYXBpLnJlbW92ZUxpa2UoY2FyZElkKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtcXVhbnRpdHknKS50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8g0KPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YHQu9GD0YjQsNGC0LXQu9C4INGB0L7QsdGL0YLQuNC5INC90LAg0LrQvdC+0L/QutC4INC+0YLQutGA0YvRgtC40Y8g0YTQvtGA0LxcblxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuRm9ybUVkaXQpO1xucGxhY2VBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuRm9ybUFkZCk7XG5hdmF0YXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUG9wdXBBdmF0YXIpO1xuIiwiY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fZGlzYWJsZWQnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcbn07XG5cbmNvbnN0IGxhcmdlUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2xhcmdlLXBob3RvJyk7XG5jb25zdCBjYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XG5jb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZS1pbnB1dCcpO1xuY29uc3QgaW5wdXRJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luZm8taW5wdXQnKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnRuJyk7XG5jb25zdCBhdmF0YXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ0bicpO1xuY29uc3QgcGxhY2VBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ0bicpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUtdGV4dCcpO1xuY29uc3QgcHJvZmlsZUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fc3VidGl0bGUnKTtcbmNvbnN0IGVsZW1lbnRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saXN0Jyk7XG5jb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWltYWdlJyk7XG5jb25zdCBwb3B1cEVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBFZGl0X19idXR0b24nKTtcbmNvbnN0IHBvcHVwQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwQWRkX19idXR0b24nKTtcbmNvbnN0IHBvcHVwQXZhdGFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwQ2hhbmdlQXZhdGFyX19idXR0b24nKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmV4cG9ydCB7XG4gIGxhcmdlUGhvdG8sXG4gIGNhcHRpb24sXG4gIGlucHV0TmFtZSxcbiAgaW5wdXRJbmZvLFxuICBwcm9maWxlRWRpdEJ0bixcbiAgcGxhY2VBZGRCdG4sXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlSW5mbyxcbiAgZWxlbWVudHNDb250YWluZXIsXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGF2YXRhcixcbiAgYXZhdGFyQnRuLFxuICBwb3B1cEVkaXRCdG4sXG4gIHBvcHVwQWRkQnRuLFxuICBwb3B1cEF2YXRhckJ0blxufTtcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9pbnB1dExpc3QiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJlbmFibGVTdWJtaXRCdXR0b24iLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsIkNhcmQiLCJjYXJkRGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlIiwidXNlcklkIiwiYWRkTGlrZUNhcmQiLCJyZW1vdmVMaWtlQ2FyZCIsIl90aXRsZSIsIm5hbWUiLCJfaW1hZ2UiLCJsaW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfb3duZXJJZCIsIm93bmVyIiwiX2lkIiwiX2NhcmRJZCIsIl91c2VySWQiLCJfYWx0SW1hZ2UiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9hZGRMaWtlIiwiX3JlbW92ZUxpa2UiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJsaWtlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfY2hhbmdlTGlrZUltYWdlU3RhdHVzIiwiX2VsZW1lbnRJbWFnZSIsImxlbmd0aCIsInNyYyIsImFsdCIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwibGVuZ2h0IiwidG9nZ2xlIiwiX29wZW5Qb3B1cEltYWdlIiwiX29wZW5Qb3B1cERlbGV0ZSIsIl9jaGFuZ2VMaWtlQ2FyZCIsIlNlY3Rpb24iLCJyZW5kZXJlciIsImNvbnRhaW5lciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIl9pdGVtcyIsIml0ZW1zIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiY2xvc2UiLCJQb3B1cFdpdGhJbWFnZSIsIl9sYXJnZVBob3RvIiwiX2NhcHRpb24iLCJpbWFnZSIsInRpdGxlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdEZvcm0iLCJfaGFuZGxlU3VibWl0Rm9ybSIsIl9wb3B1cEZvcm0iLCJpbnB1dERhdGEiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWUiLCJyZXNldCIsIlBvcHVwQ2FyZERlbGV0ZSIsImhhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsImNhcmRJZCIsImNhcmRFbGVtZW50IiwiX2NhcmRFbGVtZW50IiwiVXNlckluZm8iLCJpbmZvIiwiX25hbWUiLCJfaW5mbyIsImFib3V0IiwiY29uZmlnIiwiaGFuZGxlUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiQXBpIiwib3B0aW9ucyIsIl91cmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwiZ2V0SW5wdXRWYWx1ZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXNlckNhcmQiLCJhdmF0YXIiLCJpbnB1dE5hbWUiLCJpbnB1dEluZm8iLCJwcm9maWxlRWRpdEJ0biIsImF2YXRhckJ0biIsInBsYWNlQWRkQnRuIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSW5mbyIsImVsZW1lbnRzQ29udGFpbmVyIiwicG9wdXBFZGl0QnRuIiwicG9wdXBBZGRCdG4iLCJwb3B1cEF2YXRhckJ0biIsImNhcmRMaXN0IiwiY3JlYXRlQ2FyZCIsImFkZEl0ZW0iLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiZm9ybVZhbGlkYXRvcnMiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cFdpdGhGb3JtQWRkIiwidGV4dEJ0bk9yaWdpbmFsIiwicmVuZGVyTG9hZGluZyIsImFkZENhcmQiLCJ1c2VyIiwicHJlcGVuZEl0ZW0iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cFdpdGhGb3JtRWRpdCIsInNldFVzZXJJbmZvIiwicG9wdXBXaXRoRm9ybUF2YXRhciIsImNoYW5nZUF2YXRhciIsInBvcHVwV2l0aEltYWdlIiwicG9wdXBDYXJkRGVsZXRlIiwicmVtb3ZlQ2FyZCIsImlzTG9hZGluZyIsInN1Ym1pdEJ0biIsImNhcmRDb25maWciLCJvcGVuUG9wdXBJbWFnZSIsIm9wZW5Qb3B1cERlbGV0ZSIsImdlbmVyYXRlQ2FyZCIsIm9wZW4iLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsImdldEluaXRpYWxDYXJkcyIsInJlbmRlckl0ZW1zIiwiZ2V0VXNlckluZm8iLCJyZXNldFZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9